<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Restcomm Media Server User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
<h1>Restcomm Media Server User Guide</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#preface">Preface</a></li>
<li><a href="#document-conventions">Document Conventions</a>
<ul class="sectlevel2">
<li><a href="#typographic-conventions">Typographic Conventions</a></li>
<li><a href="#pull-quote-conventions">Pull-quote Conventions</a></li>
<li><a href="#notes-and-warnings">Notes and Warnings</a></li>
</ul>
</li>
<li><a href="#provide-feedback-to-the-authors">Provide feedback to the authors!</a></li>
<li><a href="#_ittms_introduction_to_the_media_server">1. Introduction to the Restcomm Media Server</a>
<ul class="sectlevel2">
<li><a href="#_ittms_overview_the_reasoning_and_need_for_media_servers">1.1. Overview: the Reasoning and Need for Media Server</a></li>
<li><a href="#_ittms_technical_specification_and_capacity">1.2. Technical Specification and Capacity</a></li>
<li><a href="#_ittms_media_server_architecture">1.3. Media Server Architecture</a></li>
</ul>
</li>
<li><a href="#_chapter_installing_the_media_server">2. Installing the Media Server</a>
<ul class="sectlevel2">
<li><a href="#_itms_binary_jboss_media_server_installing_configuring_and_running">2.1. JBoss Application Server 5.x.y embedded Media Server Binary Distribution: Installing, Configuring and Running</a></li>
</ul>
</li>
<li><a href="#_ctms_configuring_the_media_server">3. Configuring the Media Server</a>
<ul class="sectlevel2">
<li><a href="#network-configuration">3.1. Network Configuration</a></li>
<li><a href="#controller-configuration">3.2. Controller Configuration</a></li>
<li><a href="#media-configuration">3.3. Media Configuration</a></li>
<li><a href="#resources-configuration">3.4. Resources Configuration</a></li>
</ul>
</li>
<li><a href="#_captms_controlling_and_programming_the_media_server">4. Controlling and Programming the Restcomm Media Server</a>
<ul class="sectlevel2">
<li><a href="#_captms_mms_control_protocols">4.1. Restcomm Media Server Control Protocols</a></li>
</ul>
</li>
<li><a href="#_msep_ms_event_packages">5. RMS: Event Packages</a>
<ul class="sectlevel2">
<li><a href="#list-of-supported-packages-per-endpoint">5.1. List of supported packages per Endpoint</a></li>
</ul>
</li>
<li><a href="#_msde_ms_demonstration_example">6. Restcomm Media Server Demonstration Example</a></li>
<li><a href="#_msbp_ms_best_practices">7. Restcomm Media Server: Best Practices</a>
<ul class="sectlevel2">
<li><a href="#restcomm-media-server-best-practices">7.1. Restcomm Media Server  Best Practices</a></li>
</ul>
</li>
<li><a href="#understanding-digital-signal-processing-and-streaming">Appendix A: Understanding Digital Signal Processing and Streaming</a>
<ul class="sectlevel2">
<li><a href="#introduction-to-digital-signal-processing">Introduction to Digital Signal Processing</a></li>
<li><a href="#analog-and-digital-signals">Analog and Digital Signals</a></li>
<li><a href="#sampling-quantization-and-packetization">Sampling, Quantization, and Packetization</a></li>
<li><a href="#transfer-protocols">Transfer Protocols</a></li>
</ul>
</li>
<li><a href="#_jdk_installing_configuring_and_running">Appendix B: Java Development Kit (): Installing, Configuring and Running</a></li>
<li><a href="#_jboss_home_setup">Appendix C: Setting the JBOSS_HOME Environment Variable</a></li>
<li><a href="#revision-history">Appendix D: Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="preface"><a class="anchor" href="#preface"></a>Preface</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="document-conventions"><a class="anchor" href="#document-conventions"></a>Document Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This manual uses several conventions to highlight certain words and phrases and draw attention to specific pieces of information.</p>
</div>
<div class="paragraph">
<p>In PDF and paper editions, this manual uses typefaces drawn from the <a href="https://fedorahosted.org/liberation-fonts/">Liberation Fonts</a> set.
The Liberation Fonts set is also used in HTML editions if the set is installed on your system.
If not, alternative but equivalent typefaces are displayed.
Note: Red Hat Enterprise Linux 5 and later includes the Liberation Fonts set by default.</p>
</div>
<div class="sect2">
<h3 id="typographic-conventions"><a class="anchor" href="#typographic-conventions"></a>Typographic Conventions</h3>
<div class="paragraph">
<p>Four typographic conventions are used to call attention to specific words and phrases.
These conventions, and the circumstances they apply to, are as follows.</p>
</div>
<div class="paragraph">
<p><code>Mono-spaced Bold</code></p>
</div>
<div class="paragraph">
<p>Used to highlight system input, including shell commands, file names and paths.
Also used to highlight key caps and key-combinations.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
To see the contents of the file <em class="path">my_next_bestselling_novel</em> in your current working directory, enter the <code>cat my_next_bestselling_novel</code> command at the shell prompt and press <kbd>Enter</kbd> to execute the command.
</blockquote>
</div>
<div class="paragraph">
<p>The above includes a file name, a shell command and a key cap, all presented in Mono-spaced Bold and all distinguishable thanks to context.</p>
</div>
<div class="paragraph">
<p>Key-combinations can be distinguished from key caps by the hyphen connecting each part of a key-combination.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Press <kbd>Enter</kbd> to execute the command.</p>
</div>
<div class="paragraph">
<p>Press  to switch to the first virtual terminal.
Press  to return to your X-Windows session.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The first sentence highlights the particular key cap to press.
The second highlights two sets of three key caps, each set pressed simultaneously.</p>
</div>
<div class="paragraph">
<p>If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code>Mono-spaced Bold</code>.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
File-related classes include <code class="class">filesystem</code> for file systems, <code class="class">file</code> for files, and <code class="class">dir</code> for directories.
Each class has its own associated set of permissions.
</blockquote>
</div>
<div class="paragraph">
<p><code class="app">Proportional Bold</code></p>
</div>
<div class="paragraph">
<p>This denotes words or phrases encountered on a system, including application names; dialogue box text; labelled buttons; check-box and radio button labels; menu titles and sub-menu titles.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Choose <span class="menu">System &gt; Preferences &gt; Mouse</span> from the main menu bar to launch <code class="app">Mouse Preferences</code>.
In the <span class="label">Buttons</span> tab, click the <span class="label">Left-handed mouse</span> check box and click <b class="button">Close</b> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).</p>
</div>
<div class="paragraph">
<p>To insert a special character into a <code class="app">gedit</code> file, choose <span class="menu">Applications &gt; Accessories &gt; Character Map</span> from the main menu bar.
Next, choose <span class="menu">Search &gt; Find</span> from the <code class="app">Character Map</code> menu bar, type the name of the character in the <span class="label">Search</span> field and click <b class="button">Next</b>.
The character you sought will be highlighted in the <span class="label">Character Table</span>.
Double-click this highlighted character to place it in the <span class="label">Text to copy</span> field and then click the <b class="button">Copy</b> button.
Now switch back to your document and choose <span class="menu">Edit &gt; Paste</span> from the <code class="app">gedit</code> menu bar.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in Proportional Bold and all distinguishable by context.</p>
</div>
<div class="paragraph">
<p>Note the menu:&gt;[] shorthand used to indicate traversal through a menu and its sub-menus.
This is to avoid the difficult-to-follow 'Select  from the <span class="menuseq"><span class="menu">Preferences</span>&#160;&#9656; <span class="menuitem">] sub-menu in the menu:System[</span></span> menu of the main menu bar' approach.</p>
</div>
<div class="paragraph">
<p><code>Mono-spaced Bold Italic</code> or <code class="app">Proportional Bold Italic</code></p>
</div>
<div class="paragraph">
<p>Whether Mono-spaced Bold or Proportional Bold, the addition of Italics indicates replaceable or variable text.
Italics denotes text you do not input literally or displayed text that changes depending on circumstance.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>To connect to a remote machine using ssh, type <code>ssh <a href="mailto:username@domain.name">username@domain.name</a></code> at a shell prompt.
If the remote machine is <em class="path">example.com</em> and your username on that machine is john, type <code>ssh <a href="mailto:john@example.com">john@example.com</a></code>.</p>
</div>
<div class="paragraph">
<p>The <code>mount -o remount file-system</code> command remounts the named file system.
For example, to remount the <em class="path">/home</em> file system, the command is <code>mount -o remount /home</code>.</p>
</div>
<div class="paragraph">
<p>To see the version of a currently installed package, use the <code>rpm -q package</code> command.
It will return a result as follows: <code>package-version-release</code>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Note the words in bold italics above &mdash;username, domain.name, file-system, package, version and release.
Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.</p>
</div>
<div class="paragraph">
<p>Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
When the Apache HTTP Server accepts requests, it dispatches child processes or threads to handle them.
This group of child processes or threads is known as a <em class="term">server-pool</em>.
Under Apache HTTP Server 2.0, the responsibility for creating and maintaining these server-pools has been abstracted to a group of modules called <em class="term">Multi-Processing Modules</em> (<em class="term">MPMs</em>). Unlike other modules, only one module from the MPM group can be loaded by the Apache HTTP Server.
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="pull-quote-conventions"><a class="anchor" href="#pull-quote-conventions"></a>Pull-quote Conventions</h3>
<div class="paragraph">
<p>Two, commonly multi-line, data types are set off visually from the surrounding text.</p>
</div>
<div class="paragraph">
<p>Output sent to a terminal is set in <code>Mono-spaced Roman</code> and presented thus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs</pre>
</div>
</div>
<div class="paragraph">
<p>Source-code listings are also set in <code>Mono-spaced Roman</code> but are presented and highlighted as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.jboss.book.jca.ex1;

import javax.naming.InitialContext;

public class ExClient
{
   public static void main(String args[])
       throws Exception
   {
      InitialContext iniCtx = new InitialContext();
      Object         ref    = iniCtx.lookup("EchoBean");
      EchoHome       home   = (EchoHome) ref;
      Echo           echo   = home.create();

      System.out.println("Created Echo");

      System.out.println("Echo.echo('Hello') = " + echo.echo("Hello"));
   }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="notes-and-warnings"><a class="anchor" href="#notes-and-warnings"></a>Notes and Warnings</h3>
<div class="paragraph">
<p>Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A note is a tip or shortcut or alternative approach to the task at hand.
Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Important</div>
<div class="paragraph">
<p>Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply.
Ignoring Important boxes won&#8217;t cause data loss but may cause irritation and frustration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Warning</div>
<div class="paragraph">
<p>A Warning should not be ignored.
Ignoring warnings will most likely cause data loss.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="provide-feedback-to-the-authors"><a class="anchor" href="#provide-feedback-to-the-authors"></a>Provide feedback to the authors!</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>If you find a typographical error in this manual, or if you have thought of a way to make this manual better, we would love to hear from you! Please submit a report in the the {this-issue.tracker.ur}, against the product Restcomm Media Server`   `, or contact the authors.</p>
</div>
<div class="paragraph">
<p>When submitting a bug report, be sure to mention the manual&#8217;s identifier: Restcomm Media Server</p>
</div>
<div class="paragraph">
<p>If you have a suggestion for improving the documentation, try to be as specific as possible when describing it.
If you have found an error, please include the section number and some of the surrounding text so we can find it easily.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ittms_introduction_to_the_media_server"><a class="anchor" href="#_ittms_introduction_to_the_media_server"></a>1. Introduction to the Restcomm Media Server</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ittms_overview_the_reasoning_and_need_for_media_servers"><a class="anchor" href="#_ittms_overview_the_reasoning_and_need_for_media_servers"></a>1.1. Overview: the Reasoning and Need for Media Server</h3>
<div class="paragraph">
<div class="title">Media Gateways Bridge Multiple Technologies</div>
<p>Today, computers play an important role in modern communications.
Widespread access to broadband Internet and the ubiquity of Internet Protocol (IP) enable the convergence of voice, data and video.
Media gateways provide the ability to switch voice media between a network and its access point.
Using Digital Subscriber Line (DSL) and fast-Internet cable technology, a media gateway converts, compresses and packetizes voice data for transmission back-and-forth across the Internet backbone for landline and wireless phones.
Media gateways sit at the intersection of Public Switched Telephone Networks (PSTN) and wireless or IP-based networks.</p>
</div>
<div class="paragraph">
<div class="title">Why Media Gateways for VoIP Is Needed</div>
<p>Multiple market demands are pushing companies to converge all of their media services using media gateways with Voice-over-IP (VoIP) capabilities.
Some of the expected benefits of the architecture are as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Lowering initial costs</dt>
<dd>
<p>Capital investment is decreased because low-cost commodity hardware can be used for multiple functions.</p>
</dd>
<dt class="hdlist1">Lowering development costs</dt>
<dd>
<p>Open system hardware and software standards with well-defined applications reduce costs, and Application Programming Interfaces (APIs) accelerate development.</p>
</dd>
<dt class="hdlist1">Handling multiple media types</dt>
<dd>
<p>Companies want solutions that are extensible and that will be ready to handle future needs like, video.</p>
</dd>
<dt class="hdlist1">Lowering the costs of deployment and maintenance</dt>
<dd>
<p>Standardized, modular systems reduce training costs and maintenance while simultaneously improving uptime.</p>
</dd>
<dt class="hdlist1">Enabling rapid time-to-market</dt>
<dd>
<p>Early market entry hits the window of opportunity and maximizes revenue.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">What Is the Restcomm Media Server?</div>
<p>The Restcomm Media Server is an open source Media Server aimed at:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delivering competitive, complete, best-of-breed media gateway functionality of the highest quality.</p>
</li>
<li>
<p>Meeting the demands of converged wireless and landline networks, DSL and cable broadband access, and fixed-mobile converged 					&mdash;&mdash; networks from a singleand singularly-capablemedia gateway platform.</p>
</li>
<li>
<p>Increasing flexibility with a media gateway that supports a wide variety of call control protocols, which possesses an architecture that can scale to meet the demands of small-carrier providers as well as large enterprises.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because Restcomm Media Server is Java based, it is cross platform, easy to install and run on any operating system that supports Java.
The available source code is a powerful tool to debug the server and understand processing logic.
It also gives you the flexibility to create customized components and configurations.</p>
</div>
<div class="paragraph">
<p>Form version 4.0.0, the Restcomm Media Server is available only as Standalone.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ittms_technical_specification_and_capacity"><a class="anchor" href="#_ittms_technical_specification_and_capacity"></a>1.2. Technical Specification and Capacity</h3>
<div class="paragraph">
<p>The Restcomm Media Server is capable of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Media and Codecs :</p>
<div class="ulist">
<ul>
<li>
<p>G711 (a-Law, u-Law)</p>
</li>
<li>
<p>GSM</p>
</li>
<li>
<p>Linear PCM(L16)</p>
</li>
<li>
<p>G729</p>
</li>
<li>
<p>DTMF(RFC 2833, INBAND)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Media Files :</p>
<div class="ulist">
<ul>
<li>
<p>WAV</p>
</li>
<li>
<p>GSM</p>
</li>
</ul>
</div>
</li>
<li>
<p>Signaling and control :</p>
<div class="ulist">
<ul>
<li>
<p>MGCP</p>
</li>
<li>
<p>Java Media Control API(JSR-309)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Capacity : Typical media sessions per server</p>
<div class="ulist">
<ul>
<li>
<p>G.711 , L16 @20ms  500+ per cpu core</p>
</li>
<li>
<p>GSM @ 20ms  95 GSM mixed with 380 G.711 , L16 , 475 overall per cpu core</p>
</li>
<li>
<p>G.729 @20ms  45 GSM mixed with 180 G.711 , L16 , 225 overall per cpu core</p>
<div class="paragraph">
<p>All benchmark tests  where done on Amazon EC2 cloud instances.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ittms_media_server_architecture"><a class="anchor" href="#_ittms_media_server_architecture"></a>1.3. Media Server Architecture</h3>
<div class="paragraph">
<p>Media services have played an important role in the traditional Time Division Multiplexing (TDM)-based telephone network.
As the network migrates to an IP-based environment, media services are also moving to new environments.</p>
</div>
<div class="paragraph">
<p>One of the most exciting trends is the emergence and adoption of complementary modular standards that leverage the Internet to enable media services to be developed, deployed and updated rapidly.
This is carried out in a network architecture that supports the two concepts called <em>provisioning-on-demand</em> and <em>scaling-on-demand</em>			.</p>
</div>
<div class="sect3">
<h4 id="_ittms_high_level_component"><a class="anchor" href="#_ittms_high_level_component"></a>1.3.1. High level components</h4>
<div class="paragraph">
<p>The Media Server&#8217;s high degree of modularity benefits the application developer in several ways.
The already-tight code can be further optimized to support applications that require small footprints.
For example, if PSTN interconnection is unnecessary in an application, then the D-channel feature can be removed from the Media Server.
In the future, if the same application is deployed within a Signaling System 7 (SS7) network, then the appropriate endpoint can be enabled, and the application is then compatible.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mms-MMSArchictecture-dia-MMS2.jpg" alt="mms MMSArchictecture dia MMS2">
</div>
</div>
<div class="paragraph">
<p>The Media Server architecture assumes that call control intelligence lies outside of the Media Server, and is handled by an external entity.
The Media Server also assumes that call controllers will use control procedures such as MGCP, MEGACO or MSML, among others
Each specific control module can be plugged in directly to the server as a standard deployable unit.
Utilizing the JBoss Microcontainer for the implementation of control protocol-specific communication logic allows for simple deployment.
It is therefore unnecessary for developers to configure low-level transaction and state management details, multi-threading, connection-pooling and other low-level details and APIs.</p>
</div>
<div class="paragraph">
<p>The Restcomm Media Server call control intelligence can be a JSLEE Application deployed on Restcomm JAIN SLEE Server or any other JAIN SLEE container.
In case of Restcomm JSLEE Server there is already MGCP Resource Adaptor available.</p>
</div>
<div class="paragraph">
<p>Restcomm Media Server can also be controlled from Restcomm SIP Servlets or any other SIP Servlets container using any of the above call control procedures or using the Restcomm JSR-309 Implementation.
Restcomm JSR-309 Implementation internally leverages MGCP protocol to controll Media Server.
Restcomm JSR-309 implementation details is out of scope of this document.</p>
</div>
<div class="paragraph">
<p>It is also possible to control the Restcomm Media Server from any third party Java application (including standalone Java apps) or other technologies like .NET etc as far as they follow standrad protocols like MGCP, MEGACO etc.
There is no dependency on call controller but the protocol used between the call controller and Restcomm Media Server.</p>
</div>
<div class="paragraph">
<p>Many key features of Restcomm Media Server are provided by integrating individual components operating using generic Service Provider Interface.
There are two of types of high level components: Endpoints and Controllers.</p>
</div>
<div class="sect4">
<h5 id="_ittms_endpoints"><a class="anchor" href="#_ittms_endpoints"></a>Endpoints</h5>
<div class="paragraph">
<p>It is convenient to consider a media gateway as a collection of endpoints.
An endpoint is a logical representation of a physical entity such as an analog phone or a channel in a trunk.
Endpoints are sources or sinks of data and can be either physical or virtual.
Physical endpoint creation requires hardware installation, while software is sufficient for creating virtual endpoints.
An interface on a gateway that terminates at a trunk connected to a 					switch would be an example of a physical endpoint.
An audio source in an audio content server would be an example of a virtual endpoint.</p>
</div>
<div class="paragraph">
<p>The type of the endpoint determines its functionality.
From the points considered so far, the following basic endpoint types have been identified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>digital signal 0 (DS0)</p>
</li>
<li>
<p>analog line</p>
</li>
<li>
<p>announcement server access point</p>
</li>
<li>
<p>conference bridge access point</p>
</li>
<li>
<p>packet relay</p>
</li>
<li>
<p>Asynchronous Transfer Mode (ATM) "trunk side" interface</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This list is not comprehensive.
Other endpoint types may be defined in the future, such as test endpoints which could be used to check network quality, or frame-relay endpoints that could be used to manage audio channels multiplexed over a frame-relay virtual circuit.</p>
</div>
<div class="dlist">
<div class="title">Descriptions of Various Access Point Types</div>
<dl>
<dt class="hdlist1">Announcement Server Access Point</dt>
<dd>
<p>An announcement server endpoint provides access, intuitively, to an announcement server.
Upon receiving requests from the call agent, the announcement server &#8220;plays&#8221; a specified announcement.
A given announcement endpoint is not expected to support more than one connection at a time.
Connections to an announcement server are typically one-way; they are &#8220;half-duplex&#8221;	: the announcement server is not expected to listen to audio signals from the connection.
Announcement access points are capable of playing announcements; however, these endpoints do not have the capability of transcoding.
To achieve transcoding, a Packet Relay must be used.
Also note that the announcement server endpoint can generate tones, such as dual-tone multi-frequency (DTMF).</p>
</dd>
<dt class="hdlist1">Interactive Voice Response Access Point</dt>
<dd>
<p>An Interactive Voice Response (IVR) endpoint provides access to an IVR service.
Upon requests from the call agent, the IVR server &#8220;plays&#8221; announcements and tones, and &#8220;listens&#8221; for responses, such as (DTMF) input or voice messages, from the user.
A given IVR endpoint is not expected to support more than one connection at a time.
Similarly to announcement endpoints, IVR endpoints do not possess media-transcoding capabilities.
IVR plays and records in the format in which the media was stored or received.</p>
</dd>
<dt class="hdlist1">Conference Bridge Access Point</dt>
<dd>
<p>A conference bridge endpoint is used to provide access to a specific conference.
Media gateways should be able to establish several connections between the endpoint and packet networks, or between the endpoint and other endpoints in the same gateway.
The signals originating from these connections are mixed according to the connection &#8220;mode&#8221;	(as specified later in this document). The precise number of connections that an endpoint supports is characteristic of the gateway, and may, in fact, vary according to the allocation of resources within the gateway.</p>
</dd>
<dt class="hdlist1">Packet Relay Endpoint</dt>
<dd>
<p>A packet relay endpoint is a specific form of conference bridge that typically only supports two connections.
Packet relays can be found in firewalls between a protected and an open network, or in transcoding servers used to provide interoperation between incompatible gateways, such as gateways which don&#8217;t support compatible compression algorithms and gateways which operate over different transmission networks, such as IP or ATM.</p>
</dd>
<dt class="hdlist1">Echo Endpoint</dt>
<dd>
<p>An echo&#8212;&#8203;or loopback&#8212;&#8203;endpoint is a test endpoint that is used for maintenance and/or continuity testing.
The endpoint returns the incoming audio signal from the endpoint back to that same endpoint, thus creating an echo effect</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_ittms_controller_modules"><a class="anchor" href="#_ittms_controller_modules"></a>Controller Modules</h5>
<div class="paragraph">
<p>Controller Modules allows external interfaces to be implemented for the Media Server.
Each controller module implements an industry standard control protocol, and uses a generic SPI to control processing components or endpoints.</p>
</div>
<div class="paragraph">
<p>One such controller module is the Media Gateway Control Protocol (MGCP). MGCP is designed as an internal protocol within a distributed system that appears to outside as a single VoIP gateway.
The MGCP is composed of a Call Agent, and set of gateways including at least one "media gateway" that perform the conversion of media signal between circuit and packets, and at least one "signalling gateway" when connecting to an SS7 controlled network.
The Call Agent can be distributed over several computer platforms.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_installing_the_media_server"><a class="anchor" href="#_chapter_installing_the_media_server"></a>2. Installing the Media Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Restcomm Media Server distribution is available as Standalone</p>
</div>
<div class="paragraph">
<p>The Media Server is available in both binary and source code distributions.
The simplest way to get started with the Media Server is to download the ready-to-run binary distribution.
Alternatively, the source code for the Media Server can be obtained by checking it out from its repository using the Git version control system. You can later run a build using Maven.
The binary distribution is recommended for most users.
Downloading and building the source code is recommended for those who want access to the latest revisions and Media Server capabilities.</p>
</div>
<div class="paragraph">
<p>Installing the <a href="#_jdk_installing_configuring_and_running">Java Development Kit (): Installing, Configuring and Running</a></p>
</div>
<div class="sect2">
<h3 id="_itms_binary_jboss_media_server_installing_configuring_and_running"><a class="anchor" href="#_itms_binary_jboss_media_server_installing_configuring_and_running"></a>2.1. JBoss Application Server 5.x.y embedded Media Server Binary Distribution: Installing, Configuring and Running</h3>
<div class="paragraph">
<p>Restcomm Media Server either comes bundled with the JBoss Application Server or Standalone.
This section details how to install the Restcomm Media Server that comes bundled with JBoss Application Server 5.
For installation of Standalone Restcomm Media Server , refer to <a href="#_itms_binary_standalone_media_server_installing_configuring_and_running">[_itms_binary_standalone_media_server_installing_configuring_and_running]</a></p>
</div>
<div class="sect3">
<h4 id="_itms_binary_jboss_media_server_preinstall_requirements_and_prerequisites"><a class="anchor" href="#_itms_binary_jboss_media_server_preinstall_requirements_and_prerequisites"></a>2.1.1. Pre-Install Requirements and Prerequisites</h4>
<div class="paragraph">
<p>Ensure that the following requirements have been met before continuing with the installation.</p>
</div>
<div class="dlist">
<div class="title">Hardware Requirements</div>
<dl>
<dt class="hdlist1">Sufficient Disk Space</dt>
<dd>
<p>Once unzipped, the JBoss AS embedded Media Server binary release requires <em>at least</em>							&amp;MS_EMB_SIZE;							of free disk space.
Keep in mind that disk space requirements may change in future iterations.</p>
</dd>
<dt class="hdlist1">Anything built for Java</dt>
<dd>
<p>The JBoss embedded Media Server and its bundled servers, JBoss, are 100% Java.
The Media Server will run on the same hardware that the JBoss Application Server runs on.</p>
</dd>
</dl>
</div>
<div class="dlist">
<div class="title">Software Prerequisites</div>
<dl>
<dt class="hdlist1">JDK 5 or Higher</dt>
<dd>
<p>A working installation of the Java Development Kit ( 							) version 5 or higher is required in order to run the JBoss embedded Media Server.
Note that the JBoss Application Server is a runtime dependency of the Media Server and, as mentioned, comes bundled with the binary distribution.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_itms_binary_jboss_media_server_downloading"><a class="anchor" href="#_itms_binary_jboss_media_server_downloading"></a>2.1.2. Downloading</h4>
<div class="paragraph">
<p>The latest version of the JBoss embedded Media Server is available from <a href="http://www.mobicents.org/mms-downloads.html" class="bare">http://www.mobicents.org/mms-downloads.html</a>				. The top row of the table holds the latest version.
Click the <code>Download</code>				link to start the download.</p>
</div>
</div>
<div class="sect3">
<h4 id="_itms_binary_jboss_media_server_installing"><a class="anchor" href="#_itms_binary_jboss_media_server_installing"></a>2.1.3. Installing</h4>
<div class="paragraph">
<p>Once the requirements and prerequisites have been met, the JBoss embedded Media Server can be installed onto the system.
Follow the instructions below for the operating system on which the server will reside.</p>
</div>
<div class="paragraph">
<div class="title">Procedure: Installing the JBoss embedded Media Server BinaryDistribution on Linux</div>
<p>It is assumed that the downloaded archive is saved in the home directory, and that a terminal window is open displaying the home directory.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a subdirectory into which the files can be extracted. For ease of identification, it is recommended that the version number of the binary is included in this directory name.</p>
<div class="listingblock">
<div class="content">
<pre>~]$ mkdir ms-&lt;version&gt;</pre>
</div>
</div>
</li>
<li>
<p>Move the downloaded zip file into the directory:</p>
<div class="listingblock">
<div class="content">
<pre>~]$ mv mms-3.0.0.FINAL.zip ms-&lt;version&gt;</pre>
</div>
</div>
</li>
<li>
<p>Move into the directory:</p>
<div class="listingblock">
<div class="content">
<pre>~]$ cd	ms-&lt;version&gt;</pre>
</div>
</div>
</li>
<li>
<p>Extract the files into the current directory by executing one of the following commands.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Java:</p>
<div class="listingblock">
<div class="content">
<pre>ms-&lt;version&gt;]$ jar -xvf mms-3.0.0.FINAL.zip</pre>
</div>
</div>
</li>
<li>
<p>Linux:</p>
<div class="listingblock">
<div class="content">
<pre>ms-&lt;version&gt;]$ unzip mms-3.0.0.FINAL.zip</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Alternatively, use <code>unzip</code> -d &lt;unzip_to_location&gt; to extract the zip file&#8217;s contents to a location other than the current directory.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Consider deleting the archive, if free disk space is an issue.</p>
<div class="listingblock">
<div class="content">
<pre>ms-&lt;version&gt;]$ rm mms-3.0.0.FINAL.zip</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Installing the JBoss embedded Media Server BinaryDistribution on Windows</div>
<ol class="arabic">
<li>
<p>For this procedure, it is assumed that the downloaded archive is saved in the <em class="path">My Downloads</em>						folder.
You can also choose any convenient folder of your choice.</p>
</li>
<li>
<p>Create a subfolder in <em class="path">My Downloads</em>						to extract the zip file&#8217;s contents into.
For ease of identification, it is recommended that the version number of the binary is included in the folder name.
For example, <em class="path">ms-&lt;version&gt;</em> .</p>
</li>
<li>
<p>Extract the contents of the archive, specifying the destination folder as the one created in the previous step.</p>
</li>
<li>
<p>Alternatively, execute the <code>jar -xvf</code>	command to extract the binary distribution files from the zip archive.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Move the downloaded zip file from <em class="path">My Downloads</em> to the folder created in the previous step.</p>
</li>
<li>
<p>Open the Windows Command Prompt and navigate to the folder that contains the archive using the <code>cd</code> command</p>
</li>
<li>
<p>Execute the <code>jar -xvf</code> command to extract the archive contents into the current folder.</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users\&lt;user&gt;\My Downloads\ms-&lt;version&gt;\jar -xvf "mms-3.0.0.FINAL.zip"</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>It is recommended that the folder holding the JBoss embedded Media Server files (in this example, the folder named <em class="path">ms-&lt;version&gt;</em>) is moved to a user-defined location for storing executable programs.
For example, the <em class="path">Program Files</em> folder.</p>
</li>
<li>
<p>Consider deleting the archive, if free disk space is an issue.</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users\&lt;user&gt;\My Downloads\ms-&lt;version&gt;\delete "mms-3.0.0.FINAL.zip"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_itms_binary_jboss_media_server_running"><a class="anchor" href="#_itms_binary_jboss_media_server_running"></a>2.1.4. Running</h4>
<div class="paragraph">
<p>In the Linux terminal or Windows command prompt, the JBoss embedded Media Server has started successfully if the last line of output is similar to the following (ending with &#8220;Started in 23s:648ms&#8221;				):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>11:27:34,663 INFO  [ServerImpl] JBoss (Microcontainer) [5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221053)] Started in 37s:637ms</code></pre>
</div>
</div>
<div class="olist arabic">
<div class="title">Procedure: Running the Media Server on Linux</div>
<ol class="arabic">
<li>
<p>Change the working directory to installation directory (the one into which the zip file&#8217;s contents was extracted)</p>
<div class="listingblock">
<div class="content">
<pre>						downloads]$ cd "mms-server"</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Ensure that the <em class="path">bin/run.sh</em>						start script is executable.</p>
<div class="listingblock">
<div class="content">
<pre>ms-&lt;version&gt;]$ chmod +x bin/run.sh</pre>
</div>
</div>
</li>
<li>
<p>Execute the <em class="path">run.sh</em>						Bourne shell script.</p>
<div class="listingblock">
<div class="content">
<pre>ms-&lt;version&gt;]$ ./bin/run.sh</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Instead of executing the Bourne shell script to start the server, the <em class="path">run.jar</em>					executable Java archive can be executed from the <em class="path">bin</em>					directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ms-&lt;version&gt;]$ java -jar bin/run.jar</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure: Running the JBoss embedded Media Server on Windows</div>
<ol class="arabic">
<li>
<p>Using Windows Explorer, navigate to the <em class="path">bin</em> subfolder in the installation directory.</p>
</li>
<li>
<p>The preferred way to start the JBoss embedded Media Server is from the Command Prompt.
The command line interface displays details of the startup process, including any problems encountered during the startup process.</p>
<div class="paragraph">
<p>Open the Command Prompt via the <span class="label">Start</span>						menu and navigate to the correct folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>C:\Users\&lt;user&gt;\My Downloads&gt; cd "mms-server"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Start the JBoss Application Server by executing one of the following files:</div>
<ul>
<li>
<p><em class="path">run.bat</em> batch file:</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users\&lt;user&gt;\My Downloads\ms-&lt;version&gt;&gt;bin\run.bat</pre>
</div>
</div>
</li>
<li>
<p><em class="path">run.jar</em> executable Java archive:</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users\&lt;user&gt;\My Downloads\ms-&lt;version&gt;&gt;java -jar bin\run.jar</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_itms_jboss_server_structure"><a class="anchor" href="#_itms_jboss_server_structure"></a>2.1.5. Server Structure</h4>
<div class="paragraph">
<p>Now the server is installed, it is important to understand the layout of the server directories.
An understanding of the server structure is useful when deploying examples, and making configuration changes.
It is also useful to understand what components can be removed to reduce the server boot time.</p>
</div>
<div class="paragraph">
<p>The directory structure in the JBoss embedded Media Server installation directory is named using a standard structure. <a href="#_tab_mms_jboss_directory_structure">Directory Structure</a> describes each directory, and the type of information contained within each location.</p>
</div>
<table id="_tab_mms_jboss_directory_structure" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Directory Structure</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directory Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the entry point JARs and start-up scripts included with the Media Server distribution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the core services that are required for the server. This includes the bootstrap descriptor, log files, and the default bootstrap-beans.xml configuration file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the dynamic deployment content required by the hot deployment service. The deploy location can be overridden by specifying a location in the URL attribute of the URLDeploymentScanner configuration item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the startup JAR files used by the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the logs from the bootstrap logging service. The log directory is the default directory into which the bootstrap logging service places its logs, however, the location can be overridden by altering the log4j.xml configuration file. This file is located in the /conf directory.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Media Server uses a number of XML configuration files that control various aspects of the server.
In case of embedded Media Server all the files related Media Server are placed in  mms-jboss-5.1.0.GA-&lt;version&gt;/jboss-5.1.0.GA/server/default/deploy/mobicents-media-server <a href="#_tab_mms_jboss_core_configuration_file_set">Core Configuration File Set</a> describes the location of the key configuration files, and provides a description of the</p>
</div>
<table id="_tab_mms_jboss_core_configuration_file_set" class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Core Configuration File Set</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File Name and Location</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf/bootstrap-beans.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies which additional microcontainer deployments are loaded as part of the bootstrap phase. bootstrap-beans.xml references other configuration files contained in the /conf/bootstrap/ directory. For a standard configuration, the bootstrap configuration files require no alteration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf/log4j.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Apache log4j framework category priorities and appenders used by the Media Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf/mgcp-conf.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the configuration for the MGCP controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf/mediaserver.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration file of the Media Server. For more information please see chapter 3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy/server-beans.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specified list of Java Beans necessary for bootstrapping the Media Server.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_itms_writing_and_running_tests_against_the_media_server"><a class="anchor" href="#_itms_writing_and_running_tests_against_the_media_server"></a>2.1.6. Writing and Running Tests Against the Media Server</h4>
<div class="paragraph">
<p>For information about the different kinds of tests that the Media Server provides, refer to <a href="http://groups.google.com/group/mobicents-public/web/mobicents-ms-tests">
				Writing and Running Tests Against MMS
			</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ctms_configuring_the_media_server"><a class="anchor" href="#_ctms_configuring_the_media_server"></a>3. Configuring the Media Server</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="network-configuration"><a class="anchor" href="#network-configuration"></a>3.1. Network Configuration</h3>
<div class="exampleblock">
<div class="title">Example 1. Network configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;network&gt;
	&lt;bindAddress&gt;127.0.0.1&lt;/bindAddress&gt;
	&lt;externalAddress&gt;127.0.0.1&lt;/externalAddress&gt;
	&lt;network&gt;127.0.0.1&lt;/network&gt;
	&lt;subnet&gt;255.255.255.255&lt;/subnet&gt;
	&lt;sbc&gt;false&lt;/sbc&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="address-bindings"><a class="anchor" href="#address-bindings"></a>Address Bindings</h5>
<div class="paragraph">
<p><strong>BindAddress</strong> is the address of the network interface to which Media Server is bound to. All RTP channels are open on this address.</p>
</div>
<div class="paragraph">
<p><strong>ExternalAddress</strong> is the public address of the server. It is mainly used to patch SDP and to expose SRFLX candidates during ICE negotiation.</p>
</div>
</div>
<div class="sect4">
<h5 id="network-subnet-and-sbc"><a class="anchor" href="#network-subnet-and-sbc"></a>Network, Subnet and SBC</h5>
<div class="paragraph">
<p>The Media server can work in two distinct modes: Standard or SBC.</p>
</div>
<div class="paragraph">
<p>When <strong>sbc</strong> is set to false, the Media Server will establish a channel based on address/port pair it receives from SDP response.
However, if the RTP packet is used within a NAT context, data sent in SDP is the original data and not the NATted IP address/port (this is often the scenario).
Furthermore, when <strong>sbc</strong> is set to false, data will be sent to invalid address and also will not be accepted since Media Server does not know the correct address of the UA.</p>
</div>
<div class="paragraph">
<p>In order to solve NAT issues the <strong>sbc</strong> option must be set to true.
As result, Media Server will wait for first RTP packet; learn its remote IP address and port and only then it will send data based on the remote address and not on SDP response.</p>
</div>
<div class="paragraph">
<p>As consequence inter-server traffic will not work since both sides will be waiting for first packet.
To solve this, you should set local network and local subnet to a range that will include all Media Servers in the same cluster.
If the Media Server detects that the IP address and port in SDP are within the local IP network range, it will start sending packets immediately and not wait.
This is similar to when <strong>sbc</strong> is set to false.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="controller-configuration"><a class="anchor" href="#controller-configuration"></a>3.2. Controller Configuration</h3>
<div class="paragraph">
<p>This configuration subset defines the default Media Server Controller, the core component that processes incoming requests and manages media resources.</p>
</div>
<div class="paragraph">
<p>The default controller is based on MGCP protocol. Enabling MGCP is always required as the JSR-309 driver is based on the current MGCP implementation as well.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Controller Configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;controller protocol="mgcp"&gt;
	&lt;address&gt;127.0.0.1&lt;/address&gt;
	&lt;port&gt;2427&lt;/port&gt;
	&lt;endpoints&gt;
		&lt;endpoint name="mobicents/bridge/" class="org.mobicents.media.server.mgcp.endpoint.BridgeEndpoint" poolSize="50" /&gt;
		&lt;endpoint name="mobicents/ivr/" class="org.mobicents.media.server.mgcp.endpoint.IvrEndpoint" poolSize="50" /&gt;
		&lt;endpoint name="mobicents/cnf/" class="org.mobicents.media.server.mgcp.endpoint.ConferenceEndpoint" poolSize="50" /&gt;
	&lt;/endpoints&gt;
	&lt;configuration&gt;mgcp-conf.xml&lt;/configuration&gt;
	&lt;poolSize&gt;25&lt;/poolSize&gt;
&lt;/controller&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="network"><a class="anchor" href="#network"></a>3.2.1. Network</h4>
<div class="paragraph">
<p>The <strong>Address</strong> parameter defines the address of the network interface to which the controller is bound to. The control channel is open on this address.</p>
</div>
<div class="paragraph">
<p>The <strong>Port</strong> parameter defines the port where the control channel will listen to for incoming requests. By default, it is set to 2427.</p>
</div>
<div class="paragraph">
<p>The <strong>PoolSize</strong> parameter defines the number of MGCP requests that Media Server can handle concurrently.</p>
</div>
</div>
<div class="sect3">
<h4 id="endpoints"><a class="anchor" href="#endpoints"></a>3.2.2. Endpoints</h4>
<div class="paragraph">
<p>The <strong>Endpoints</strong> configuration allows you to configure all MGCP endpoint groups you want to use with the Media Server instance.</p>
</div>
<div class="paragraph">
<p>The <strong>Configuration</strong> parameter points to an XML file containing the definitions of MGCP packages, signals and packages mapping to endpoints.</p>
</div>
<div class="paragraph">
<p>The user can configure the initial <strong>poolSize</strong> for each endpoint type.
This value will determine the number of endpoints that are preloaded on startup.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Endpoint Pooling</div>
<div class="paragraph">
<p>If all available endpoints are used and a request for  additional endpoint is received, Media Server will allocate a new endpoint and store it in a resource pool.</p>
</div>
<div class="paragraph">
<p>The only exception to this rule is DS0 endpoint type.
The DS0 endpoint can not be increased as it is directly related to the number of channels available on an E1/T1 card.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <strong>Name</strong> parameter represents the name pattern to be used for MGCP requests that target a specific endpoint type.
For example, the name pattern <em>mobicents/aap</em> will be created and accessed as <em>mobicents/aap/$</em> (where $ is an integer representing the endpoint ID).</p>
</div>
<div class="paragraph">
<p>The <strong>Class</strong> parameter represents the class of installer.
Currently 2 types of installers are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong class="path">VirtualEndpointInstaller</strong> which allows you to install most endpoints</p>
</li>
<li>
<p><strong class="path">VirtualSS7EndpointInstaller</strong> which is used for DS0 endpoints.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Endpoint class  defines the class which implements endpoints.</p>
</div>
<div class="paragraph">
<p>Currently, the following endpoint classes are available :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Endpoint Classes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Endpoint Class</th>
<th class="tableblock halign-left valign-top">Available Resources</th>
<th class="tableblock halign-left valign-top">Connection Types</th>
<th class="tableblock halign-left valign-top">Relay Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mobicents.media.server.mgcp.endpoint.AnnouncementEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Player</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local+RTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mixer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mobicents.media.server.mgcp.endpoint.IvrEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Player,Recorder,Dtmf Detector,Dtmf Generator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local+RTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mixer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mobicents.media.server.mgcp.endpoint.ConferenceEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local+RTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mixer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mobicents.media.server.mgcp.endpoint.BridgeEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local+RTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Splitter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mobicents.media.server.mgcp.endpoint.PacketRelayEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mixer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mobicents.media.server.mgcp.endpoint.Ds0Endpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signal Detector,Signal Generator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local+RTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Splitter</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A Mixer endpoint will mix together data from both connections and resources.
This implies that it will still be available even without the appropriate setting mode.</p>
</div>
<div class="paragraph">
<p>A Splitter endpoint is not a standard MGCP endpoint type, as it handles two different resources groups.
The first group uses local connections whereas the second group uses RTP connections.
This implies that non-RTP connections can communicate with RTP endpoints and none local connections can still access local endpoints.</p>
</div>
<div class="paragraph">
<p>The Bridge endpoint, a Splitter type, is useful in the scenarios shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/bridge-endpoint-ivr-conference.png" alt="bridge endpoint ivr conference">
</div>
</div>
<div class="paragraph">
<p>In this scenario, both IVR and Conference endpoints will be connected by a pair of Local Connections to the Bridge Endpoint. This is considered a good practice as there will be no cross over of IVR Resources (player , recorder , etc ) to conference.
The same applies to any conference traffic, it will not cross over to IVR.
This is useful for recording RTP data for specific groups of users.</p>
</div>
<div class="paragraph">
<p>DS0 endpoint is a type Splitter.
All connections, signal detector and signal generator are in group 1,  while signalling channel SS7 is placed in group 2.
That means that any SS7 channel data will be sent to any connection and signal detector, while data from signal generator and any connection will be sent only to SS7 channel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Endpoint Groups</div>
<div class="paragraph">
<p>In order to configure multiple groups of endpoints of the same type per Media Server instance, you must change the name of each group.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="media-configuration"><a class="anchor" href="#media-configuration"></a>3.3. Media Configuration</h3>
<div class="paragraph">
<p>The media configuration contains definitions that have an impact on the media channels.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Media Configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;media&gt;
	&lt;timeout&gt;0&lt;/timeout&gt;
	&lt;lowPort&gt;34534&lt;/lowPort&gt;
	&lt;highPort&gt;65534&lt;/highPort&gt;
	&lt;jitterBuffer size="50" /&gt;
	&lt;codecs&gt;
		&lt;codec name="l16" /&gt;
		&lt;codec name="pcmu" /&gt;
		&lt;codec name="pcma" /&gt;
		&lt;codec name="gsm" /&gt;
		&lt;codec name="g729" /&gt;
	&lt;/codecs&gt;
&lt;/media&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rtp-channels"><a class="anchor" href="#rtp-channels"></a>3.3.1. RTP Channels</h4>
<div class="paragraph">
<p>The <strong>LowPort</strong> and <strong>HighPort</strong> define the port range reserved for RTP channels.
These values should be an even number, since odd ports are reserved for RTCP channels.</p>
</div>
<div class="paragraph">
<p>The <strong>JitterBuffer</strong> size parameter sets the maximum capacity of the jitter buffer, in milliseconds.
Jitter Buffers are commonly configured to hold up to 50-60ms of audio.</p>
</div>
</div>
<div class="sect3">
<h4 id="rtp-timeout"><a class="anchor" href="#rtp-timeout"></a>3.3.2. RTP Timeout</h4>
<div class="paragraph">
<p>Most SIP UA do not support any type of keep-alive between 200 OK and BYE.
Therefore, in case the network goes down while a call is established, the call may hang forever.
That is why RTP streaming should not be interrupted (exception to rule being <em>recvonly</em> and <em>inactive</em> modes). With the this in mind, the Media Server features the <strong>RtpTimeout</strong> parameter.</p>
</div>
<div class="paragraph">
<p>When <strong>RtpTimeout</strong> is set to greater than 0, the Media Server will monitor RTP traffic and if it finds period equal or greater then the RTP timeout (in seconds) it will delete the connection and notify the server that a connection was removed (by sending DLCX MGCP command). Consequently, any border server will receive a reliable notification that the call is still alive even when the communication network is no longer available.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When enabling RTP timeout, it is recommended that you do not set the mode to <em>inactive</em> or <em>sendonly</em> when you expect to receive data (after 180 or 200 OK) depending on your application
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 4. Call Flow</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">Similar call flow may be like this

UA ----&gt; INVITE ----&gt; Control Server
Control Server ----&gt; CRCX with mode inactive ----&gt; Media Server
Control Server ----&gt; INVITE ----&gt; inside network or to other side
Inside network or other side ----&gt; 183 with SDP ----&gt; Control Server
Control Server ---&gt; MDCX with mode sendonly ---&gt; Media Server
Control Server ---&gt; 183 with SDP ----&gt; UA
Inside network or other side ----&gt; 200 ----&gt; Control Server
Control Server ---&gt; MDCX with mode sendrecv ---&gt; Media Server
Control Server ---&gt; 200 ----&gt; UA</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In case of 180 or 183 without SDP response , intermediate MDCX is not required.</p>
</div>
</div>
<div class="sect3">
<h4 id="codecs"><a class="anchor" href="#codecs"></a>3.3.3. Codecs</h4>
<div class="paragraph">
<p>Currently media server supports five codecs : G711 A/U, Linear PCM Raw, GSM, ILBC and G.729.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">G.729 usage</div>
Please note that a valid license is required to use G.729 , therefore you should purchase a license prior to enabling this codec.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you decide to use a single codec for encoding or decoding data, you should leave one RAW or 2 Raw pair.
This is useful only in case of a one way activity.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">L16 usage</div>
L16 codec is useful only in server to server communication where you have enough network bandwidth.
It is not recommended to allow L16 codec for UA  server connections, this can lead to degradation of the signal quality due to increased jitter and packet loss.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-configuration"><a class="anchor" href="#resources-configuration"></a>3.4. Resources Configuration</h3>
<div class="paragraph">
<p>In the current Media Server release, a global pool of resources is used to decrease garbage collection and allow for faster resource allocation.</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. Resources Configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;resources&gt;
	&lt;localConnection poolSize="100" /&gt;
	&lt;remoteConnection poolSize="50" /&gt;
	&lt;player poolSize="50" /&gt;
	&lt;recorder poolSize="50" /&gt;
	&lt;dtmfDetector poolSize="50" dbi="-35" /&gt;
	&lt;dtmfGenerator poolSize="50" toneVolume="-20" toneDuration="80" /&gt;
	&lt;signalDetector poolSize="0" /&gt;
	&lt;signalGenerator poolSize="0" /&gt;
&lt;/resources&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As seen above, default pool sizes are configured for each possible type of media components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Local Connection</strong> - Link between two MGCP Endpoints;</p>
</li>
<li>
<p><strong>Remote Connection</strong> - Link between an MGCP Endpoint and a remote peer;</p>
</li>
<li>
<p><strong>Player</strong> - Plays audio tracks;</p>
</li>
<li>
<p><strong>Recorder</strong> - Records audio streams;</p>
</li>
<li>
<p><strong>DTMF Generator</strong> - Generates out-of-band DTMF tones;</p>
</li>
<li>
<p><strong>DTMF Detector</strong> - Detects both inband and out-of-band tones;</p>
</li>
<li>
<p><strong>Signal Detector</strong> - Detects SS7 tones;</p>
</li>
<li>
<p><strong>Signal Generator</strong> - Generates SS7 tones.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">About DTMF Detector Dbi</div>
<div class="paragraph">
<p>Audio data is mixed with DTMF inband tones often.
As result, Media Server may detect false positive tones, or it may not detect tones which are sent.</p>
</div>
<div class="paragraph">
<p>By setting DTMF detector dbi parameter, the user can optimize tone detection by fine-tuning this parameter. However, default value has been tested and found to be generally appropriate.</p>
</div>
<div class="paragraph">
<p>Good practice mandates that inband tones should be used only in SS7/IP mixed network.
IP-only networks should use out-of-band tones only and disable inband detection.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Signal Detector and Signal Generator are currently only used for connectivity tests for DS0 channel (COT isup signal), CO1, CO2, CT (Continuity Transport) and Loopback test modes.</p>
</div>
<div class="paragraph">
<p>For more information please see <a href="http://localhost:50253/afx/resource/Users/hrosa/Telestax/mobicents/mediaserver/git/mediaserver/docs/sources-asciidoc/src/main/asciidoc/preview.html#_msep_ms_event_packages">[_msep_ms_event_packages</a>]</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">When the specified resource type is not available</div>
<div class="paragraph">
<p>Please note that a resource will be automatically allocated if the specified resource type is not available in the resource pool.
This will require more memory allocation and in some cases may impact performance.</p>
</div>
<div class="paragraph">
<p>The more resources you have pre-configured on startup in the resource pool, the more memory the Media Server will require on startup.
It is up to the user to decide the best trade-off for the setup (greater memory usage on startup vs slower response when new resources are required in runtime).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_captms_controlling_and_programming_the_media_server"><a class="anchor" href="#_captms_controlling_and_programming_the_media_server"></a>4. Controlling and Programming the Restcomm Media Server</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_captms_mms_control_protocols"><a class="anchor" href="#_captms_mms_control_protocols"></a>4.1. Restcomm Media Server Control Protocols</h3>
<div class="paragraph">
<p>The Restcomm Media Server adopts a call control architecture where the call control &#8220;intelligence&#8221; is located outside of the Media Server itself, and is handled by external call control elements collectively known as Call State Control Function (CSCF).The media server assumes that these call control elements will synchronize with each other to send coherent commands and responses to the media servers under their control.
Server Control Protocols is, in essence, an asynchronous master/slave protocol, where the Server Control Modules are expected to execute commands sent by CSCF.
Each Server Control Module is implemented as a JSLEE application, and consists of a set of Service Building Blocks ()s, which are in charge of communicating with media server endpoints via SPI.
Such an architecture avoids difficulties with programming concurrency, low-level transaction and state-management details, connection-pooling and other complex APIs.</p>
</div>
<div class="sect3">
<h4 id="_captms_media_gateway_control_protocol_interface"><a class="anchor" href="#_captms_media_gateway_control_protocol_interface"></a>4.1.1. Media Gateway Control Protocol Interface</h4>
<div class="paragraph">
<p>The Media Gateway Control Protocol (MGCP) is a protocol for controlling media gateways (for example, the Media Server) from external call control elements such as media gateway controllers or Call Agents.
The MGCP assumes that the Call Agents, will synchronize with each other to send coherent commands and responses to the gateways under their control.</p>
</div>
<div class="paragraph">
<p>The MGCP module is included in the binary distribution.
The Call Agent uses the MGCP to tell the Media Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>which events should be reported to the Call Agent;</p>
</li>
<li>
<p>how endpoints should be connected; and,</p>
</li>
<li>
<p>which signals should be played on which endpoints.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>MGCP is, in essence, a master/slave protocol, where the gateways are expected to execute commands sent by the Call Agents.
The general base architecture and programming interface is described in <a href="http://www.ietf.org/rfc/rfc2805.txt">RFC 2805</a>, and the current specific MGCP definition is located in <a href="http://www.ietf.org/rfc/rfc3435.txt">RFC 3435</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="jsr-309-control-protocol-interface"><a class="anchor" href="#jsr-309-control-protocol-interface"></a>4.1.2. JSR-309 Control protocol Interface</h4>
<div class="paragraph">
<p>JSR-309 defines a programming model and object model for Media Server (MS) control independent of MS control protocols.
JSR-309 API is not an API for a specific protocol.
It will take advantage of the multiple and evolving Multimedia Server capabilities available in the industry today and also provide an abstraction for commonly used application functions like multi party conferencing, multimedia mixing and interaction dialogs.</p>
</div>
<div class="paragraph">
<p>Some of the commonly used MS control protocols are <a href="http://www.ietf.org/rfc/rfc3435.txt">MGCP (RFC 3435)</a>, MEGACO (RFC 3525), Media Server Markup Language (MSML) (RFC 4722) and VoiceXML.
The Restcomm implementation of JSR-309 API makes use of MGCP as MS control protocol.</p>
</div>
<div class="paragraph">
<p>The Restcomm JSR-309 Impl is first and only open source implementation of JSR-309 available as of today.
To further understand the JSR-309 API, download specs from <a href="http://jcp.org/en/jsr/detail?id=309">here</a></p>
</div>
<div class="paragraph">
<p>&#8220;The latest release of Restcomm JSR-309 Impl is part of binary media server release and can be found under clients folder&#8221;.</p>
</div>
<div class="paragraph">
<p>The diagram bellow shows the high-level architecture of how application can make use of JSR-309 over MGCP</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/SipJSR309.jpeg" alt="SipJSR309">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_msep_ms_event_packages"><a class="anchor" href="#_msep_ms_event_packages"></a>5. RMS: Event Packages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Announcement Package(A): <code>org.mobicents.media.server.mgcp.pkg.ann</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Announcement Package(A):</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Signal Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Play Announcement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Failed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see: <a href="https://tools.ietf.org/html/rfc3660#section-2.12" class="bare">https://tools.ietf.org/html/rfc3660#section-2.12</a></p>
</div>
<div class="paragraph">
<p><code>Advanced Audio Package(AU): org.mobicents.media.server.mgcp.pkg.au</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Advanced Audio Package(AU):</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Signal Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Play Announcement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Play Collect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Play Record</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">es</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End Signal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Failed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see: <a href="https://tools.ietf.org/html/rfc2897" class="bare">https://tools.ietf.org/html/rfc2897</a></p>
</div>
<div class="paragraph">
<p><code>Trunk Package(T): org.mobicents.media.server.mgcp.pkg.trunk</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Trunk Package(T):</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Signal Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">co1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuity 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">co2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuity 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loopback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuity Transpoder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Failed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see: <a href="https://tools.ietf.org/html/rfc3660#section-2.3" class="bare">https://tools.ietf.org/html/rfc3660#section-2.3</a></p>
</div>
<div class="paragraph">
<p>Dtmf Package(D): <code>org.mobicents.media.server.mgcp.pkg.dtmf</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. Dtmf Package(D):</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Signal Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone 9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone *</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone #</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone D</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tone Operation Completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Failed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see: <a href="https://tools.ietf.org/html/rfc3660#section-2.2" class="bare">https://tools.ietf.org/html/rfc3660#section-2.2</a></p>
</div>
<div class="paragraph">
<p>`Signal List Package (SL): org.mobicents.media.server.mgcp.pkg.sl `</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. Signal List Package (SL):</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Signal Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of signals to be generated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">of</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation Failed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see: <a href="https://tools.ietf.org/html/rfc3660#section-2.8" class="bare">https://tools.ietf.org/html/rfc3660#section-2.8</a></p>
</div>
<div class="sect2">
<h3 id="list-of-supported-packages-per-endpoint"><a class="anchor" href="#list-of-supported-packages-per-endpoint"></a>5.1. List of supported packages per Endpoint</h3>
<div class="paragraph">
<p>Configuration of supported packages and events can be done through the mgcp-conf.xml configuration file that is located in the <em class="path">conf</em> directory.</p>
</div>
<div class="paragraph">
<p>The table belows shows supported packages and the related enabled endpoints</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 9. List of Supported Packages per Endpoint</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Package name</th>
<th class="tableblock halign-left valign-top">Endpoints</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Play announcement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Announcement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IVR, Announcements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced Audio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IVR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trunk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dtmf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IVR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signal List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IVR</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_msde_ms_demonstration_example"><a class="anchor" href="#_msde_ms_demonstration_example"></a>6. Restcomm Media Server Demonstration Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Restcomm Media Server 3.0.0.FINAL is a standalone media software.
Control panels servers are required in order to make Restcomm Media Server part of your network architecture.
Two controlling protocols (JSR-309 and MGCP) are currently enabled to work with Restcomm Media Server 3.0.0.FINAL.</p>
</div>
<div class="paragraph">
<p>Depending on your needs, <a href="https://github.com/Restcomm/jain-slee/">Jain-slee </a> , <a href="https://github.com/Restcomm/sipservlets/">Sip Servlets </a> or <a href="https://github.com/Restcomm/Restcomm-Connect/">RestComm-Connect</a> can be used to control the media server.
The examples below are included in the &amp;Restcomm Media Server_SHORT_NAME; software.</p>
</div>
<div class="paragraph">
<p>To get Jain-Slee examples please see following examples that are part of mobicents / telestax jain Slee release :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 10. Example for Jain-Slee</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jain-Slee Example List</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">call-controller2 which uses MGCP to control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mgcp-demo which uses MGCP to control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mscontrol-demo which uses JSR-309 to control</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see <a href="https://github.com/RestComm/jain-slee.media/tree/master/examples">Jain-Slee documentation</a> that comes with this examples.</p>
</div>
<div class="paragraph">
<p>The following examples use Restcomm Media Server with Restcomm SIP Servlets :</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. Examples for SIP Servlets</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SIP Servlets Example List</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conference-demo jsr-309</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">media-jsr-309-servlet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">shopping-demo-jsr309</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All servlets examples are using jsr-309 control protocol.</p>
</div>
<div class="paragraph">
<p>For more information please see <a href="https://github.com/RestComm/sip-servlets/tree/master/sip-servlets-examples">SIP Servlets documentation</a> that comes with these examples.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using Restcomm Media Server with RestComm</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">with RestComm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RMS is required in order to successfully work with RestComm. Consequently, any example created to demonstrate the use of RestComm will incorporate Restcomm Media Server (RMS). RestComm use MGCP as the controlling protocol for RMS.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information please see <a href="https://github.com/Restcomm/Restcomm-Connect">RestComm-Connect documentation.</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_msbp_ms_best_practices"><a class="anchor" href="#_msbp_ms_best_practices"></a>7. Restcomm Media Server: Best Practices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="restcomm-media-server-best-practices"><a class="anchor" href="#restcomm-media-server-best-practices"></a>7.1. Restcomm Media Server  Best Practices</h3>
<div class="paragraph">
<p>Note: these best practices apply to Restcomm Media Server version 4.2.0-SNAPSHOT and later</p>
</div>
<div class="sect3">
<h4 id="dtmf-detection-mode-rfc2833-versus-inband-versus-auto"><a class="anchor" href="#dtmf-detection-mode-rfc2833-versus-inband-versus-auto"></a>7.1.1. DTMF Detection Mode: RFC2833 versus Inband versus Auto</h4>
<div class="paragraph">
<p>The Restcomm Media Server will block the resource depending on the DTMF detection mode configured in <em>jboss-service.xml</em> at start-up time.
Inband is highly resource-intensive and must perform many more calculations in order to detect DTMF when compared to RFC2833.
So if your application already knows that User Agents (UAs) support RFC2833, it is always better to configure DTMF mode as <em>RFC2833</em> rather than as <em>Inband</em> or <em>Auto</em>.
Also, please note that <em>Auto</em> is even more resource-intensive because it does not know beforehand whether DTMF would be Inband or <em>RFC2833</em>, and hence both detection methods must be started.
The default detection mode is <em>RFC2833</em>.</p>
</div>
<div class="paragraph">
<p>All of the Conference, Packet Relay and IVR endpoints have DTMF detection enabled; the mode can be configured using <em>jboss-service.xml</em>.
We advise retaining the same mode for all three, but this is not a necessity.</p>
</div>
</div>
<div class="sect3">
<h4 id="transcoding-is-cpu-intensive"><a class="anchor" href="#transcoding-is-cpu-intensive"></a>7.1.2. Transcoding Is CPU-Intensive</h4>
<div class="paragraph">
<p>Digital Signal Processing (DSP) is very costly and should be avoided as much as possible.
By default, Announcement endpoints and IVR endpoints do not have DSP enabled.
What this means is that your application needs to know beforehand which codecs are supported by your UA; you can then ask Announcement or IVR to play an audio file which has been pre-encoded in one of these formats.
The onus of deciding which pre-encoded file to play lies with the application.
For example, if I am writing a simple announcement application that would only play announcements to the end user, and I know that my end users have one of either the <em>PCMU</em> or <em>GSM</em> codecs, then I would make sure to have pre-encoded audio files such as <em>helloworld-pcmu.wav</em> and <em>helloworld-gsm.gsm</em>.
Then, when the UA attempts to connect to the Media Server, my application knows which codecs the UA supports and can ask the Restcomm Media Server to play the respective file.</p>
</div>
<div class="paragraph">
<p>This strategy will work fine because, most of the time in the telecommunications world, applications have a known set of supported codecs, .However if this is not true, or if you are writing a simple demo application and need or want all codecs to be supported, you can put a Packet Relay endpoint in front of Announcement or IVR endpoint.
This way, the Packet Relay will do all necessary digital signal processing, and your application need not bother about which audio file to play.
The audio file in this case will be encoded in <em>Linear</em> format, and all UAs, irrespective of whether they support <em>PCMU</em>, <em>PCMA</em>, <em>Speex</em>, <em>G729</em> or <em>GSM</em> codecs, would be able to hear the announcement.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding-digital-signal-processing-and-streaming"><a class="anchor" href="#understanding-digital-signal-processing-and-streaming"></a>Appendix A: Understanding Digital Signal Processing and Streaming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following information provides a basic introduction to Digital Signal Processing, and Streaming technologies.
These two technologies are used extensively in the Media Server, therefore understanding these concepts will assist developers in creating customized media services for the Media Server.</p>
</div>
<div class="sect2">
<h3 id="introduction-to-digital-signal-processing"><a class="anchor" href="#introduction-to-digital-signal-processing"></a>Introduction to Digital Signal Processing</h3>
<div class="paragraph">
<p>Digital Signal Processing, as the name suggests, is the processing of signals by digital means.
A signal in this context can mean a number of different things.
Historically the origins of signal processing are in electrical engineering, and a signal here means an electrical signal carried by a wire or telephone line, or perhaps by a radio wave.
More generally, however, a signal is a stream of information representing anything from stock prices to data from a remote-sensing satellite.
The term "digital" originates from the word "digit", meaning a number, therefore "digital" literally means numerical.
This introduction to DSP will focus primary on two types digital signals: audio and voice.</p>
</div>
</div>
<div class="sect2">
<h3 id="analog-and-digital-signals"><a class="anchor" href="#analog-and-digital-signals"></a>Analog and Digital Signals</h3>
<div class="paragraph">
<p>Data can already be in a digital format (for example, the data stream from a Compact Disk player), and will not require any coversion.
In many cases however, a signal is received in the form of an analog electrical voltage or current, produced by a microphone or other type of transducer.
Before DSP techniques can be applied to an analog signal, it must be converted into digital form.
Analog electrical voltage signals can be digitized using an analog-to-digital converter (ADC), which generates a digital output as a stream of binary numbers.
These numbers represent the electrical voltage input to the device at each sampling instant.</p>
</div>
<div class="sect3">
<h4 id="discrete-signals"><a class="anchor" href="#discrete-signals"></a>Discrete Signals</h4>
<div class="paragraph">
<p>When converting a continuous analog signal to a digital signal, the analog signal must be converted to a signal format that computers can analyze and perform complex calculations on.
Discrete Signals are easily stored and transmitted over digital networks and have the ability to be discrete in magnitude, time, or both.</p>
</div>
<div class="paragraph">
<p>Discrete-in-time values only exist at certain points in time.
For example, if a sample of discrete-in-time data is taken at a point in time where there is no data, the result is zero.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mms-DiscreteSignals-dia-Discrete_In_Time.png" alt="mms DiscreteSignals dia Discrete In Time">
</div>
</div>
<div class="paragraph">
<p>Discrete-In-Magnitude values exist across a time range, however, the value of the datum in each time range consists of one constant result, rather than a variable set of results.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mms-DiscreteSignals-dia-Discrete_In_Magnitude.png" alt="mms DiscreteSignals dia Discrete In Magnitude">
</div>
</div>
<div class="paragraph">
<p>By converting continuous analog signals to discrete signals, finer computer data analysis is possible, and the signal can be stored and tranmitted efficiently over digital networks.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sampling-quantization-and-packetization"><a class="anchor" href="#sampling-quantization-and-packetization"></a>Sampling, Quantization, and Packetization</h3>
<div class="paragraph">
<p>Sampling is the process of recording the values of a signal at given points in time.
For ADCs, these points in time are equidistant, with the number of samples taken during one second dictating the called sample rate.
It&#8217;s important to understand that these samples are still analogue values.
The mathematic description of the ideal sampling is the multiplication of the signal with a sequence of direct pulses.</p>
</div>
<div class="paragraph">
<p>Quantization is the process of representing the value of an analog signal by a fixed number of bits.
The value of the analog signal is compared to a set of pre-defined levels.
Each level is represented by a unique binary number, and the binary number that corresponds to the level closest to the analog signal value is chosen to represent that sample.</p>
</div>
<div class="paragraph">
<p>Sampling and quantization prepare digitized media for future processing or streaming.
However, streaming and processing over individual samples is not effective for high volumes of data transferred via a network.
The risk of data-loss is much higher when a large portion of data is transferred in a block.
Networked media should be transmitted using media packets that carry several samples, thereby reducing the risk of data loss through the transmission process.
This process is referred to as packetization.</p>
</div>
</div>
<div class="sect2">
<h3 id="transfer-protocols"><a class="anchor" href="#transfer-protocols"></a>Transfer Protocols</h3>
<div class="paragraph">
<p>The Real-time Streaming Protocol (RTSP), Real-time Transport Protocol (RTP) and the Real-time Transport Control Protocol (RTCP) were specifically designed to stream media over networks.
The latter two are built on top of UDP.</p>
</div>
<div class="sect3">
<h4 id="real-time-transport-protocol"><a class="anchor" href="#real-time-transport-protocol"></a>Real-time Transport Protocol</h4>
<div class="paragraph">
<p>RTP provides end-to-end network transport functions suitable for applications transmitting real-time data, such as audio, video or simulation data, over multicast or unicast network services.
RTP does not address resource reservation and does not guarantee quality-of-service for real-time services.
The data transport is augmented by the Real-time Control Protocol (RTCP) to allow monitoring of the data delivery in a manner scalable to large multicast networks, and to provide minimal control and identification functionality.
RTP and RTCP are designed to be independent of the underlying transport and network layers.</p>
</div>
<div class="paragraph">
<p>A RTP packet consists of a RTP header, followed by the data to send.
In the RTP specification, this data is referred to as the payload.
The header is transmitted in network byte order, just like the IP header.
The Figure 5 shows the RTP header format.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mms-RealTimeTransportProtocol-dia-RTP_Header.png" alt="mms RealTimeTransportProtocol dia RTP Header">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 12. Supported RTP Formats</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header Component</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V (Version)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the version number of the RTP protocol. For example, the current version number is 2. This part of the header consumes 2 bits of the RTP packet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P (Padding)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains padding bytes, which are excluded from the payload data count. The last padding byte contains the number of padding bytes present in the packet. Padding may be required for certain encryption algorithms that need the payload to be aligned on a multi-byte boundary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">X (Extension)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether the header contains an Extension Header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CC (CSRC Count)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies how many contributing sources are specified in the header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">M (Marker)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains arbitrary data that can be interpreted by an application. The RTP specification does not limit the information type contained in this component of the header. For example, the Marker component might specify that media data is contained within the packet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PT (Payload Type)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the type of data the packet contains, which determines how an application receiving the packet interprets the payload.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sequence Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains a unique numerical value, that can be used by applications to place received packets in the correct order. Video streams rely on the sequence number to order the packets for individual video frames received by an application. The starting number for a packet stream is randomized for security reasons.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time Stamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the synchronization information for a stream of packets. The value specifies when the first byte of the payload was sampled. The starting number for the Time Stamp is also randomized for security reasons. For audio, the timestamp is typically incremented with the amount of samples in the packet so the receiving application can play the audio data at exactly the right time. For video, the timestamp is typically incremented per image. One image of a video will generally be sent in several packets, therefore the pieces of data will have the same Time Stamp, but use a different Sequence Number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSRC ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the packet Synchronization Source (SSRC) identifier of the sender. The information contained in this component of the header is used to correctly order multiple RTP streams contained in a packet. This scenario often occurs when an application sends both video and audio RTP streams in one packet. So the receiving application can correctly order and synchronize the data, the identifier is chosen randomly. This reduces the chance of a packet in both streams having the same identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSRC ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains one (or more) Contributing Source (CSRC) identifiers for each RTP stream present in the packet. To assist audio streams re-assembly, the SSRC IDs can be appended to this packet component. The SSRC ID of the packet then becomes the source identifier for the forwarded packet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extension Header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains arbitrary information, specified by the application. The RTP defines the extension mechanism only. The extensions contained within the Extension Header are controlled by the application.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
RTP headers do not contain a payload length field.
The protocol relies on the underlying protocol to determine the end of the payload.
For example, in the TCP/IP architecture, RTP is used on top of UDP, which does contain length information.
Using this, an application can determine the size of the whole RTP packet and after its header has been processed, the application automatically knows the amount of data in its payload section.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="real-time-transport-control-protocol"><a class="anchor" href="#real-time-transport-control-protocol"></a>Real-time Transport Control Protocol</h4>
<div class="paragraph">
<p>The RTP is accompanied by a control protocol, the Real-time Transport Control Protocol (RTCP).  Each participant of a RTP session periodically sends RTCP packets to all other participants in the session for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To provide feedback on the quality of data distribution.
The information can be used by the application to perform flow and congestion control functions, and be used for diagnostic purposes.</p>
</li>
<li>
<p>To distribute identifiers that are used to group different streams together (for example, audio and video).  Such a mechanism is necessary since RTP itself does not provide this information.</p>
</li>
<li>
<p>To observe the number of participants.
The RTP data cannot be used to determine the number of participants because participants may not be sending packets, only receiving them.
For example, students listening to an on-line lecture.</p>
</li>
<li>
<p>To distribute information about a participant.
For example, information used to identify students in the lecturer&#8217;s conferencing user-interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are several types of RTCP packets that provide this functionality.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sender</p>
</li>
<li>
<p>Receiver</p>
</li>
<li>
<p>Source Description</p>
</li>
<li>
<p>Application-specific Data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sender reports (SR) are used by active senders to distribute transmission and reception statistics.
If a participant is not an active sender, reception statistics are still transmitted by sending receiver reports (RR).</p>
</div>
<div class="paragraph">
<p>Descriptive participant information is transmitted in the form of Source Description (SDES) items.
SDES items give general information about a participant, such as their name and e-mail.
However, it also includes a canonical name (CNAME) string, which identifies the sender of the RTP packets.
Unlike the SSRC identifier, the SDES item stays constant for a given participant, is independent of the current session, and is normally unique for each participant.
Thanks to this identifier it is possible to group different streams coming from the same source.</p>
</div>
<div class="paragraph">
<p>There is a packet type that allows application-specific data (APP) to be transmitted with RTP data.
When a participant is about to leave the session, a goodbye (BYE) packet is transmitted.</p>
</div>
<div class="paragraph">
<p>The transmission statistics which an active sender distributes, include both the number of bytes sent and the number of packets sent.
The statistics also include two timestamps:  a Network Time Protocol (NTP) timestamp, which gives the time when this report was created, and a RTP timestamp, which describes the same time, but in the same units and with the same random offset of the timestamps in the RTP packets.</p>
</div>
<div class="paragraph">
<p>This is particularly useful when several RTP packet streams have to be associated with each other.
For example, if both video and audio signals are distributed, there has to be synchronization between these two media types on playback, called inter-media synchronization.
Since their RTP timestamps have no relation whatsoever, there has to be some other way to do this.
By giving the relation between each timestamp format and the NTP time, the receiving application can do the necessary calculations to synchronize the streams.</p>
</div>
<div class="paragraph">
<p>A participant to a RTP session distributes reception statistics about each sender in the session.
For a specific sender, a reception report includes the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fraction of lost packets since the last report.
An increase of this value can be used as an indication of congestion.</p>
</li>
<li>
<p>Total amount of lost packets since the start of the session.</p>
</li>
<li>
<p>Amount of inter-arrival jitter, measured in timestamp units.
When the jitter increases, this is also a possible indication of congestion.</p>
</li>
<li>
<p>Information used by the sender to measure the round-trip propagation time to this receiver.
The round-trip propagation time is the time it takes for a packet to travel to this receiver and back.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the RTCP packets are sent periodically by each participant to all destinations, the packet broadcast interval should be reduced as much as possible.
The RTCP packet interval is calculated from the number of participants and the amount of bandwidth the RTCP packets may occupy.
To stagger the broadcast interval of RTCP packets to participants, the packet interval value is multiplied by a random number.</p>
</div>
</div>
<div class="sect3">
<h4 id="jitter"><a class="anchor" href="#jitter"></a>Jitter</h4>
<div class="paragraph">
<p>The term Jitter refers to processing delays that occur at each endpoint, and are generally caused by packet processing by operating systems, codecs, and networks.
Jitter affects the quality of the audio and video stream when it is decoded by the receiving application.</p>
</div>
<div class="paragraph">
<p>End-to-end delay is caused by the processing delay at each endpoint, and may be caused in part by IP packets travelling through different network paths from the source to the destination.
The time it takes a router to process a packet depends on its congestion situation, and this may also vary during the session.</p>
</div>
<div class="paragraph">
<p>Although a large overall delay can cause loss of interactivity, jitter may also cause loss of intelligibility.
Though Jitter cannot be totally removed, the effects can be reduced by using a Jitter Buffer at the receiving end.
The diagram below shows effect with media buffer and without media buffer</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mms-Jitter-dia-No_Jitter_Buffer.png" alt="mms Jitter dia No Jitter Buffer">
</div>
</div>
<div class="paragraph">
<p>Fig a.
Shows that packet 3 is lost as it arrived late.
Fig b uses Jitter buffer and hence arrived packets are stored in jitter and media components reads from Jitter once its half full.
This way even if Packet 3 arrives little late, its read by the components.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jdk_installing_configuring_and_running"><a class="anchor" href="#_jdk_installing_configuring_and_running"></a>Appendix B: Java Development Kit (): Installing, Configuring and Running</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The [app]` Platform` is written in Java; therefore, before running any <code class="app"> server, you must have a working Java Runtime Environment () or Java Development Kit () installed on your system.
In addition, the JRE or JDK you are using to run [app]</code> must be version 5 or higher<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup>.</p>
</div>
<div class="paragraph">
<div class="title">Should I Install the JRE or JDK?</div>
<p>Although you can run <code class="app"> servers using the Java Runtime Environment, we assume that most users are developers interested in developing Java-based, [app]</code>-driven solutions.
Therefore, in this guide we take the tact of showing how to install the full Java Development Kit.</p>
</div>
<div class="paragraph">
<div class="title">Should I Install the 32-Bit or the 64-Bit JDK, and Does It Matter?</div>
<p>Briefly stated: if you are running on a 64-Bit Linux or Windows platform, you should consider installing and running the 64-bit JDK over the 32-bit one.
Here are some heuristics for determining whether you would rather run the 64-bit Java Virtual Machine (JVM) over its 32-bit cousin for your application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Wider datapath: the pipe between RAM and CPU is doubled, which improves the performance of memory-bound applications when using a 64-bit JVM.</p>
</li>
<li>
<p>64-bit memory addressing gives virtually unlimited (1 exabyte) heap allocation.
However large heaps affect garbage collection.</p>
</li>
<li>
<p>Applications that run with more than 1.5 GB of RAM (including free space for garbage collection optimization) should utilize the 64-bit JVM.</p>
</li>
<li>
<p>Applications that run on a 32-bit JVM and do not require more than minimal heap sizes will gain nothing from a 64-bit JVM.
Barring memory issues, 64-bit hardware with the same relative clock speed and architecture is not likely to run Java applications faster than their 32-bit cousin.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the following instructions detail how to download and install the 32-bit JDK, although the steps are nearly identical for installing the 64-bit version.</p>
</div>
<div class="paragraph">
<div class="title">Downloading</div>
<p>You can download the Sun JDK 5.0 (Java 2 Development Kit) from Sun&#8217;s website: <a href="http://java.sun.com/javase/downloads/index_jdk5.jsp" class="bare">http://java.sun.com/javase/downloads/index_jdk5.jsp</a>.
Click on the <span class="label">Download</span> link next to "JDK 5.0 Update <code class="replaceable">&lt;x&gt;`" (where [replaceable]</code>&lt;x&gt;` is the latest minor version release number). On the next page, select your language and platform (both architecture&#8212;&#8203;whether 32- or 64-bit&#8212;&#8203;and operating system), read and agree to the <code>Java Development Kit 5.0 License Agreement</code>, and proceed to the download page.</p>
</div>
<div class="paragraph">
<p>The Sun website will present two download alternatives to you: one is an RPM inside a self-extracting file (for example, <em class="path">jdk-1_5_0_16-linux-i586-rpm.bin</em>), and the other is merely a self-extracting file (e.g. <em class="path">jdk-1_5_0_16-linux-i586.bin</em>). If you are installing the JDK on Red Hat Enterprise Linux, Fedora, or another RPM-based Linux system, we suggest that you download the self-extracting file containing the RPM package, which will set up and use the SysV service scripts in addition to installing the JDK.
We also suggest installing the self-extracting RPM file if you will be running [app]`` in a production environment.</p>
</div>
<div class="paragraph">
<div class="title">Installing</div>
<p>The following procedures detail how to install the Java Development Kit on both Linux and Windows.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Installing the JDK on Linux</div>
<ol class="arabic">
<li>
<p>Regardless of which file you downloaded, you can install it on Linux by simply making sure the file is executable and then running it:</p>
<div class="listingblock">
<div class="content">
<pre>~]$ chmod +x "jdk-1_5_0_&lt;minor_version&gt;-linux-&lt;architecture&gt;-rpm.bin"
~]$ ./"jdk-1_5_0_&lt;minor_version&gt;-linux-&lt;architecture&gt;-rpm.bin"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">You Installed Using the Non-RPM Installer, but Want the SysV Service Scripts</div>
<div class="paragraph">
<p>If you download the non-RPM self-extracting file (and installed it), and you are running on an RPM-based system, you can still set up the SysV service scripts by downloading and installing one of the <code>-compat</code> packages from the JPackage project.
Remember to download the <code>-compat</code> package which corresponds correctly to the minor release number of the JDK you installed.
The compat packages are available from link:ftp://jpackage.hmdc.harvard.edu/JPackage/1.7/generic/RPMS.non-free/.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You do not need to install a <code>-compat</code> package in addition to the JDK if you installed the self-extracting RPM file! The <code>-compat</code> package merely performs the same SysV service script set up that the RPM version of the JDK installer does.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure: Installing the JDK on Windows</div>
<ol class="arabic">
<li>
<p>Using Explorer, simply double-click the downloaded self-extracting installer and follow the instructions to install the JDK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Configuring</div>
<p>Configuring your system for the JDK consists in two tasks: setting the <code class="var">JAVA_HOME</code> environment variable, and ensuring that the system is using the proper JDK (or JRE) using the <code>alternatives</code> command.
Setting <code class="var">JAVA_HOME</code> usually overrides the values for <code>java</code>, <code>javac</code> and <code>java_sdk_1.5.0</code> in <code>alternatives</code>, but we will set them all just to be safe and consistent.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Setting the <code class="var">JAVA_HOME</code> Environment Variable on Generic Linux</dt>
<dd>
<p>After installing the JDK, you must ensure that the <code class="var">JAVA_HOME</code> environment variable exists and points to the location of your JDK installation.</p>
</dd>
<dt class="hdlist1">Setting <code class="var">java</code>, <code class="var">javac</code> and <code class="var">java_sdk_1.5.0</code> Using the <code>alternatives</code> command </dt>
<dd>
<p><em>As the root user</em>, call <code>/usr/sbin/alternatives</code> with the <code class="option">--config java</code> option to select between JDKs and JREs installed on your system:</p>
</dd>
<dt class="hdlist1">Setting the <code class="var">JAVA_HOME</code> Environment Variable on Windows</dt>
<dd>
<p>For information on how to set environment variables in Windows, refer to <a href="http://support.microsoft.com/kb/931715" class="bare">http://support.microsoft.com/kb/931715</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Testing</div>
<p>Finally, to make sure that you are using the correct JDK or Java version (5 or higher), and that the java executable is in your <code class="var">PATH</code>, run the `java -version
			` command in the terminal from your home directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~]$ java -version
java version "1.5.0_16"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_16-b03)
Java HotSpot(TM) Client VM (build 1.5.0_16-b03, mixed mode, sharing)</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Uninstalling</div>
<p>There is usually no reason (other than space concerns) to remove a particular JDK from your system, given that you can switch between JDKs and JREs easily using <code>alternatives</code>, and/or by setting <code class="var">JAVA_HOME</code>.</p>
</div>
<div class="paragraph">
<div class="title">Uninstalling the JDK on Linux</div>
<p>On RPM-based systems, you can uninstall the JDK using the `yum remove &lt;jdk_rpm_name&gt;
			` command.</p>
</div>
<div class="paragraph">
<div class="title">Uninstalling the JDK on Windows</div>
<p>On Windows systems, check the JDK entry in the <code>Start</code> menu for an uninstall command, or use <code>Add/Remove Programs</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jboss_home_setup"><a class="anchor" href="#_jboss_home_setup"></a>Appendix C: Setting the JBOSS_HOME Environment Variable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The [app]` Platform` (<code class="app">) is built on top of the [app]</code>.
You do not need to set the <code class="var">JBOSS_HOME</code> environment variable to run any of the [app]` Platform` servers <em>unless</em> <code class="var">JBOSS_HOME</code> is <em>already</em> set.</p>
</div>
<div class="paragraph">
<p>The best way to know for sure whether <code class="var">JBOSS_HOME</code> was set previously or not is to perform a simple check which may save you time and frustration.</p>
</div>
<div class="paragraph">
<div class="title">Checking to See If JBOSS_HOME is Set on Unix</div>
<p>At the command line, <code>echo</code>			<code>$JBOSS_HOME</code> to see if it is currently defined in your environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~]$ echo $JBOSS_HOME</pre>
</div>
</div>
<div class="paragraph">
<p>The [app]` Platform` and most &amp;THIS.PLATFORM; servers are built on top of the <code class="app"> ([app]</code>). When the [app]` Platform` or &amp;THIS.PLATFORM; servers are built <em>from source</em>, then <code class="var">JBOSS_HOME</code> <em>must</em> be set, because the &amp;THIS.PLATFORM; files are installed into (or &#8220;over top of&#8221; if you prefer) a clean <code class="app"> installation, and the build process assumes that the location pointed to by the <code class="var">JBOSS_HOME</code> environment variable at the time of building is the [app]</code> installation into which you want it to install the &amp;THIS.PLATFORM; files.</p>
</div>
<div class="paragraph">
<p>This guide does not detail building the [app]` Platform` or any &amp;THIS.PLATFORM; servers from source.
It is nevertheless useful to understand the role played by <code class="app">JBoss AS</code> and <code class="var">JBOSS_HOME</code> in the &amp;THIS.PLATFORM; ecosystem.</p>
</div>
<div class="paragraph">
<p>The immediately-following section considers whether you need to set <code class="var">JBOSS_HOME</code> at all and, if so, when.
The subsequent sections detail how to set <code class="var">JBOSS_HOME</code> on Unix and Windows</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Even if you fall into the category below of <em>not needing</em> to set <code class="var">JBOSS_HOME</code>, you may want to for various reasons anyway.
Also, even if you are instructed that you do <em>not need</em> to set <code class="var">JBOSS_HOME</code>, it is good practice nonetheless to check and make sure that <code class="var">JBOSS_HOME</code> actually <em>isn&#8217;t</em> set or defined on your system for some reason.
This can save you both time and frustration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You <em>DO NOT NEED</em> to set <code class="var">JBOSS_HOME</code> if&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;you have installed the [app]` Platform` binary distribution.</p>
</li>
<li>
<p>&#8230;&#8203;you have installed a &amp;THIS.PLATFORM;server binary distribution <em>which bundles [app]``.</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You <em>MUST</em> set <code class="var">JBOSS_HOME</code> if&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;you are installing the [app]` Platform` or any of the &amp;THIS.PLATFORM; servers <em>from source</em>.</p>
</li>
<li>
<p>&#8230;&#8203;you are installing the [app]` Platform` binary distribution, or one of the &amp;THIS.PLATFORM; server binary distributions, which <em>do not</em> bundle [app]``.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Naturally, if you installed the [app]` Platform` or one of the &amp;THIS.PLATFORM; server binary releases which <em>do not</em> bundle <code class="app">`, yet requires it to run, then you should install before setting [var]`JBOSS_HOME</code> or proceeding with anything else.</p>
</div>
<div class="paragraph">
<div class="title">Setting the JBOSS_HOME Environment Variable on Unix</div>
<p>The <code class="var">JBOSS_HOME</code> environment variable must point to the directory which contains all of the files for the [app]` Platform` or individual &amp;THIS.PLATFORM; server that you installed.
As another hint, this topmost directory contains a <em class="path">bin</em> subdirectory.</p>
</div>
<div class="paragraph">
<p>Setting <code class="var">JBOSS_HOME</code> in your personal <em class="path">~/.bashrc</em> startup script carries the advantage of retaining effect over reboots.
Each time you log in, the environment variable is sure to be set for you, as a user.
On Unix, it is possible to set <code class="var">JBOSS_HOME</code> as a system-wide environment variable, by defining it in <em class="path">/etc/bashrc</em>, but this method is neither recommended nor detailed in these instructions.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: To Set JBOSS_HOME on Unix&#8230;&#8203;</div>
<ol class="arabic">
<li>
<p>Open the <em class="path">~/.bashrc</em> startup script, which is a hidden file in your home directory, in a text editor, and insert the following line on its own line while substituting for the actual install location on your system:</p>
<div class="listingblock">
<div class="content">
<pre>export JBOSS_HOME="/home/&lt;username&gt;/&lt;path&gt;/&lt;to&gt;/&lt;install_directory&gt;"</pre>
</div>
</div>
</li>
<li>
<p>Save and close the <em class="path">.bashrc</em> startup script.</p>
</li>
<li>
<p>You should <code>source</code> the <em class="path">.bashrc</em> script to force your change to take effect, so that <code class="var">JBOSS_HOME</code> becomes set for the current session<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</sup>.</p>
<div class="listingblock">
<div class="content">
<pre>~]$ source ~/.bashrc</pre>
</div>
</div>
</li>
<li>
<p>Finally, ensure that <code class="var">JBOSS_HOME</code> is set in the current session, and actually points to the correct location:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The command line usage below is based upon a binary installation of the [app]` Platform`.
In this sample output, <code class="var">JBOSS_HOME</code> has been set correctly to the <code class="replaceable">topmost_directory</code> of the <code class="app"> installation.
Note that if you are installing one of the standalone [app]</code> servers (with <code class="app">JBoss AS</code> bundled!), then <code class="var">JBOSS_HOME</code> would point to the <code class="replaceable">topmost_directory</code> of your server installation.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>~]$ echo $JBOSS_HOME
/home/silas/&lt;path&gt;/&lt;to&gt;/&lt;install_directory&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Setting the JBOSS_HOME Environment Variable on Windows</div>
<p>The <code class="var">JBOSS_HOME</code> environment variable must point to the directory which contains all of the files for the &amp;THIS.PLATFORM;Platform or individual &amp;THIS.PLATFORM;server that you installed.
As another hint, this topmost directory contains a <em class="path">bin</em> subdirectory.</p>
</div>
<div class="paragraph">
<p>For information on how to set environment variables in recent versions of Windows, refer to <a href="http://support.microsoft.com/kb/931715" class="bare">http://support.microsoft.com/kb/931715</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="revision-history"><a class="anchor" href="#revision-history"></a>Appendix D: Revision History</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. At this point in time, it is possible to run most  servers, such as the JAIN SLEE, using a Java 6 JRE or JDK. Be aware, however, that presently the XML Document Management Server does not run on Java 6. We suggest checking the  web site, forums or discussion pages if you need to inquire about the status of running the XML Document Management Server with Java 6.
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. Note that any other terminals which were opened prior to your having altered .bashrc will need to source ~/.bashrc as well should they require access to JBOSS_HOME.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-06-11 10:44:37 WEST
</div>
</div>
</body>
</html>